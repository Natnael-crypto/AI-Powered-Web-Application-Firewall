<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Captcha Challenge</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        .container { margin-top: 50px; }
        .puzzle { width: 300px; height: 100px; background-color: lightgray; display: flex; align-items: center; justify-content: center; margin: auto; }
        .slider { width: 50px; height: 50px; background-color: blue; cursor: pointer; position: relative; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Complete the Puzzle to Proceed</h2>
        <div class="puzzle">
            <div class="slider" id="slider"></div>
        </div>
        <form action="/validate-captcha" method="POST">
            <input type="hidden" id="solution" name="solution" value="">
            <button type="submit" id="submit" disabled>Submit</button>
        </form>
    </div>

    <script>
        let slider = document.getElementById("slider");
        let solutionInput = document.getElementById("solution");
        let submitBtn = document.getElementById("submit");
        let correctPosition = 250; // Correct position for solving the puzzle
        let currentPos = 0;

        slider.onmousedown = function(event) {
            let shiftX = event.clientX - slider.getBoundingClientRect().left;
            document.onmousemove = function(event) {
                let newLeft = event.clientX - shiftX - slider.parentElement.getBoundingClientRect().left;
                if (newLeft < 0) newLeft = 0;
                if (newLeft > 250) newLeft = 250;
                slider.style.left = newLeft + "px";
                currentPos = newLeft;
            };
            document.onmouseup = function() {
                document.onmousemove = null;
                document.onmouseup = null;
                if (currentPos === correctPosition) {
                    solutionInput.value = "42"; // Correct answer
                    submitBtn.disabled = false;
                } else {
                    slider.style.left = "0px"; // Reset position
                }
            };
        };

        slider.ondragstart = function() { return false; };
    </script>
</body>
</html>
